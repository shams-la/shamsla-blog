var g$cmt_actions=$("div#comment-actions");async function targetPostReply(t){const e=t.parent().prev().val().trim();if(e.length>0){const n=t.parent().parent().parent().parent(),a={cid:n.attr("data-reply"),body:e},i=await postRequest("/post/comment/reply/",a);if(200==i.status){let t={name:g$user_name,img:g$user_avatar,id:i.id,cmt:e,time:"0 seconds"};const a=t=>t.attr("id").split("-")[1],r=t=>{const e=t.find("button#view-btn"),n=e.html(),a=Number(e.text().match(/\d+/));e.html(n.replace(/\d+/,a+1))};if("child"==n.attr("data-level")){t=[{...t,cmt:[n.children().first().attr("alt"),t.cmt]}];const e=n.parent().parent();addCommentReplies(t,a(e),!0),r(e)}else{if(n.has("button#view-btn").length){const e=n.find("button#view-btn");n.find(".replies").children().length?(addCommentReplies([t],a(n),!0),showHideReplies(e,"show")):e.click()}else addCommentReplies([t],a(n),!1),showHideReplies(n.find("button#view-btn"),"show");r(n)}}removePrevReply()}}function targetDisplayBtns(t){const e=$(t.target),n=e.next().children().first();e.val().trim().length<1?n.attr("disabled","true"):n.removeAttr("disabled")}function targetCancel(t){const e=$(t.target),n=e.parent();"comment-actions"==n.attr("id")?(text_area=n.prev(),text_area.val(""),submit_btn=e.prev(),"disabled"!=submit_btn.attr("disabled")&&submit_btn.attr("disabled","true"),n.css("display","none")):n.parent().remove()}function targetMainComment(t){g$cmt_actions.css("display","block"),removePrevReply()}function targetRenderReply(t){hideMainActions(),removePrevReply();const e=t.parent().parent(),n=getCommentBoil("reply_input");e.append(n),autosize($("#active-reply #comment-area"))}function hideMainActions(){$("button.main_cancel").click()}function removePrevReply(){$("div#active-reply").remove()}autosize(g$cmt_area),$("button#comment-ok").on("click",async t=>{let e=g$cmt_area.val().trim();if(e.length>0){const t={body:e,pid:g$post_id},n=await postRequest("/post/comment/",t);if(200==n.status){const t={name:g$user_name,img:g$user_avatar,id:n.id,cmt:e,time:"0 seconds"};g$cmt_section.prepend(replaceBoil(t,"parent")),hideMainActions()}}});